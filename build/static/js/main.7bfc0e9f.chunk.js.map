{"version":3,"sources":["utils/validator.js","components/App.js","constants/contract.js","index.js"],"names":["validateTokenId","tokenId","validateUrl","url","startsWith","validateAddress","ERROR_TOKEN_ID_TEXT","web3","Web3","givenProvider","App","useEffect","window","ethereum","enable","setCurrentAccount","eth","accounts","currentProvider","selectedAddress","toLowerCase","contractMain","Contract","CONTRACT_MAIN_ABI","contractSell","CONTRACT_SELL_ABI","useState","undefined","currentAccount","errors","setErrors","isDone","setIsDone","setUrl","setTokenId","handleSubmitMint","e","a","preventDefault","isValidUrl","isValidTokenId","methods","mint","send","from","message","tokenIdPrice","setTokenIdPrice","price","setPrice","handleSubmitSetPrice","isValidTokenIdPrice","isValidPrice","setCurrentPrice","addressToApprove","setAddressToApprove","handleSubmitApprove","isValidAddressToApprove","setApprovalForAll","purchaseTokenId","setPurchaseTokenId","purchaseValue","setPurchaseValue","handlePurchase","isValidPurchaseTokenId","isValidPurchaseValue","purchaseToken","value","className","onSubmit","type","onChange","target","disabled","length","map","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7bfc0e9f.chunk.js","sourcesContent":["export const validateTokenId = (tokenId) => {\n    return tokenId > 0;\n}\n\nexport const validateUrl = (url) => {\n    return url.startsWith('https://');\n}\n\nexport const validateAddress = (url) => {\n    return url.startsWith('0x');\n}\n\nexport const ERROR_TOKEN_ID_TEXT = 'Wrong tokenId: It should be greater than 0';\nexport const ERROR_PRICE_TEXT = 'Wrong price: It should be greater than 0';\nexport const ERROR_PURCHASE_VALUE_TEXT = 'Wrong purchase value: It should be greater than 0';\nexport const ERROR_URL_TEXT = 'Wrong url: It should starts with https://';\nexport const ERROR_ADDRESS_TEXT = 'Wrong address: It should starts with 0x';\nexport const ERROR_CONTRACT_TEXT = 'Error with contract connection';","import React, { useState, useEffect } from \"react\";\nimport Web3 from 'web3';\n\nimport {\n    validateUrl, validateTokenId, validateAddress,\n    ERROR_TOKEN_ID_TEXT, ERROR_URL_TEXT, ERROR_CONTRACT_TEXT, ERROR_PRICE_TEXT, ERROR_ADDRESS_TEXT, ERROR_PURCHASE_VALUE_TEXT\n} from \"../utils/validator\";\nimport { CONTRACT_ADDRESS_MAIN, CONTRACT_ADDRESS_SELL } from '../constants/contract';\nimport CONTRACT_MAIN_ABI from '../constants/mintNFT.json';\nimport CONTRACT_SELL_ABI from '../constants/sellNFT_CryptoArteSales.json';\n\nimport './App.css';\n\nconst web3 = new Web3(Web3.givenProvider);\n\nexport const App = () => {\n    useEffect(() => {\n        window.ethereum.enable();\n        setCurrentAccount(web3.eth.accounts.currentProvider.selectedAddress.toLowerCase());\n    }, []);\n\n    const contractMain = new web3.eth.Contract(CONTRACT_MAIN_ABI, CONTRACT_ADDRESS_MAIN);\n    const contractSell = new web3.eth.Contract(CONTRACT_SELL_ABI, CONTRACT_ADDRESS_SELL);\n    const [currentAccount, setCurrentAccount] = useState(undefined);\n    const [errors, setErrors] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    const [url, setUrl] = useState('');\n    const [tokenId, setTokenId] = useState(null);\n\n    const handleChangeTokenId = (e) => setTokenId(+e.target.value || null);\n    const handleChangeUrl = (e) => setUrl(e.target.value);\n\n    const handleSubmitMint = async (e) => {\n        e.preventDefault();\n        try {\n            setErrors([]);\n            setIsDone(false);\n            const isValidUrl = validateUrl(url);\n            const isValidTokenId = validateTokenId(tokenId);\n\n            if (!isValidUrl) {\n                setErrors((errors) => [...errors, ERROR_URL_TEXT]);\n            }\n            if (!isValidTokenId) {\n                setErrors((errors) => [...errors, ERROR_TOKEN_ID_TEXT]);\n            }\n            if (!currentAccount) {\n                setErrors((errors) => [...errors, ERROR_CONTRACT_TEXT]);\n            }\n\n            if (currentAccount && isValidTokenId && isValidUrl) {\n                await contractMain.methods.mint(currentAccount, tokenId, url).send({ from: currentAccount });\n                setIsDone(true);\n            }\n        } catch (e) {\n            setErrors([e.message]);\n        }\n    };\n\n    const [tokenIdPrice, setTokenIdPrice] = useState(null);\n    const [price, setPrice] = useState(null);\n\n    const handleChangePrice = (e) => setPrice(+e.target.value || null);\n    const handleChangeTokenIdPrice = (e) => setTokenIdPrice(+e.target.value || null);\n\n    const handleSubmitSetPrice = async (e) => {\n        e.preventDefault();\n        try {\n            setErrors([]);\n            setIsDone(false);\n            const isValidTokenIdPrice = validateTokenId(tokenIdPrice);\n            const isValidPrice = validateTokenId(price);\n\n            if (!isValidTokenIdPrice) {\n                setErrors((errors) => [...errors, ERROR_TOKEN_ID_TEXT]);\n            }\n            if (!isValidPrice) {\n                setErrors((errors) => [...errors, ERROR_PRICE_TEXT]);\n            }\n\n            if (currentAccount && isValidTokenIdPrice && isValidPrice) {\n                await contractSell.methods.setCurrentPrice(tokenIdPrice, price).send({ from: currentAccount });\n                setIsDone(true);\n            }\n        } catch (e) {\n            setErrors([e.message]);\n        }\n    }\n\n    const [addressToApprove, setAddressToApprove] = useState('');\n    const handleChangeAddressToApprove = (e) => setAddressToApprove(e.target.value);\n    const handleSubmitApprove = async (e) => {\n        e.preventDefault();\n        try {\n            setErrors([]);\n            setIsDone(false);\n            const isValidAddressToApprove = validateAddress(addressToApprove);\n\n            if (!isValidAddressToApprove) {\n                setErrors((errors) => [...errors, ERROR_ADDRESS_TEXT]);\n            }\n\n            if (currentAccount && isValidAddressToApprove) {\n                await contractMain.methods.setApprovalForAll(addressToApprove, true).send({ from: currentAccount });\n                setIsDone(true);\n            }\n        } catch (e) {\n            setErrors([e.message]);\n        }\n    }\n\n    const [purchaseTokenId, setPurchaseTokenId] = useState(null);\n    const [purchaseValue, setPurchaseValue] = useState(null);\n    const handleChangePurchaseTokenId = (e) => setPurchaseTokenId(+e.target.value || null);\n    const handleChangePurchaseValue = (e) => setPurchaseValue(+e.target.value || null);\n    const handlePurchase = async (e) => {\n        e.preventDefault();\n        try {\n            setErrors([]);\n            setIsDone(false);\n            const isValidPurchaseTokenId = validateTokenId(purchaseTokenId);\n            const isValidPurchaseValue = validateTokenId(purchaseValue);\n\n            if (!isValidPurchaseTokenId) {\n                setErrors((errors) => [...errors, ERROR_TOKEN_ID_TEXT]);\n            }\n            if (!isValidPurchaseValue) {\n                setErrors((errors) => [...errors, ERROR_PURCHASE_VALUE_TEXT]);\n            }\n\n            if (currentAccount && isValidPurchaseTokenId && isValidPurchaseValue) {\n                await contractSell.methods.purchaseToken(purchaseTokenId).send({ from: currentAccount, value: purchaseValue });\n                setIsDone(true);\n            }\n        } catch (e) {\n            setErrors([e.message]);\n        }\n    }\n\n    return (\n        <div className=\"App\">\n            <header className=\"App__header\">NFT Marketplace</header>\n            <div className=\"App__content\">\n                <form className=\"App__form\" onSubmit={handleSubmitMint}>\n                    <label className=\"App__form__label\">\n                        TokenId:\n                        <input className=\"App__form__input\" type=\"number\" value={tokenId} onChange={handleChangeTokenId} />\n                    </label>\n                    <label className=\"App__form__label\">\n                        Url:\n                        <input className=\"App__form__input\" type=\"text\" value={url} onChange={handleChangeUrl} />\n                    </label>\n                    <input type=\"submit\" className=\"App__form__button\" disabled={!tokenId || !url} value=\"Mint\" />\n                </form>\n\n                <form className=\"App__form\" onSubmit={handleSubmitSetPrice}>\n                    <label className=\"App__form__label\">\n                        TokenId:\n                        <input className=\"App__form__input\" type=\"number\" value={tokenIdPrice} onChange={handleChangeTokenIdPrice} />\n                    </label>\n                    <label className=\"App__form__label\">\n                        Price:\n                        <input className=\"App__form__input\" type=\"number\" value={price} onChange={handleChangePrice} />\n                    </label>\n                    <input type=\"submit\" className=\"App__form__button\" disabled={!tokenIdPrice || !price} value=\"Set price\" />\n                </form>\n\n                <form className=\"App__form\" onSubmit={handleSubmitApprove}>\n                    <label className=\"App__form__label\">\n                        Address:\n                        <input className=\"App__form__input\" type=\"string\" value={addressToApprove} onChange={handleChangeAddressToApprove} />\n                    </label>\n                    <input type=\"submit\" className=\"App__form__button\" disabled={!addressToApprove} value=\"Approve\" />\n                </form>\n\n                <form className=\"App__form\" onSubmit={handlePurchase}>\n                    <label className=\"App__form__label\">\n                        TokenId:\n                        <input className=\"App__form__input\" type=\"number\" value={purchaseTokenId} onChange={handleChangePurchaseTokenId} />\n                    </label>\n                    <label className=\"App__form__label\">\n                        Value:\n                        <input className=\"App__form__input\" type=\"number\" value={purchaseValue} onChange={handleChangePurchaseValue} />\n                    </label>\n                    <input type=\"submit\" className=\"App__form__button\" disabled={!purchaseTokenId || !purchaseValue} value=\"Purchase\" />\n                </form>\n            </div>\n            {\n                !!errors.length && (\n                    <div className=\"App__errors\">\n                        {errors.map((error) => (\n                            <div key={error} className=\"App__errors__error\">{error}</div>\n                        ))}\n                    </div>\n                )\n            }\n            { isDone && <div className=\"App__done\">DONE</div> }\n        </div>\n    );\n}\n","// From https://ropsten.etherscan.io/address/0x5c007a1d8051dfda60b3692008b9e10731b67fde\n// From https://ropsten.etherscan.io/address/0x7C1DcFeaE22a5CC677E22e03E2fEB8780688308a\nexport const CONTRACT_ADDRESS_MAIN = '0x5C007A1d8051DFDa60B3692008b9e10731b67FDE';\nexport const CONTRACT_ADDRESS_SELL = '0x7C1DcFeaE22a5CC677E22e03E2fEB8780688308a';\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}