{"version":3,"sources":["utils/validator.js","components/App.js","constants/contract.js","index.js"],"names":["validateTokenId","tokenId","validateUrl","url","startsWith","validateAddress","ERROR_TOKEN_ID_TEXT","web3","Web3","givenProvider","App","useEffect","window","ethereum","enable","setCurrentAccount","eth","accounts","currentProvider","selectedAddress","toLowerCase","contractMain","Contract","CONTRACT_MAIN_ABI","useState","undefined","currentAccount","setUrl","setTokenId","errors","setErrors","isDone","setIsDone","handleSubmitMint","e","a","preventDefault","isValidUrl","isValidTokenId","methods","mint","send","from","message","contractSell","CONTRACT_SELL_ABI","tokenIdPrice","setTokenIdPrice","price","setPrice","handleSubmitSetPrice","isValidTokenIdPrice","isValidPrice","setCurrentPrice","addressToApprove","setAddressToApprove","handleSubmitApprove","isValidAddressToApprove","setApprovalForAll","className","onSubmit","type","value","onChange","target","disabled","length","map","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ae693feb.chunk.js","sourcesContent":["export const validateTokenId = (tokenId) => {\n    return tokenId > 0;\n}\n\nexport const validateUrl = (url) => {\n    return url.startsWith('https://');\n}\n\nexport const validateAddress = (url) => {\n    return url.startsWith('0x');\n}\n\nexport const ERROR_TOKEN_ID_TEXT = 'Wrong tokenId: It should be greater than 0';\nexport const ERROR_PRICE_TEXT = 'Wrong price: It should be greater than 0';\nexport const ERROR_URL_TEXT = 'Wrong url: It should starts with https://';\nexport const ERROR_ADDRESS_TEXT = 'Wrong address: It should starts with 0x';\nexport const ERROR_CONTRACT_TEXT = 'Error with contract connection';","import React, { useState, useEffect } from \"react\";\nimport Web3 from 'web3';\n\nimport {\n    validateUrl, validateTokenId, validateAddress,\n    ERROR_TOKEN_ID_TEXT, ERROR_URL_TEXT, ERROR_CONTRACT_TEXT, ERROR_PRICE_TEXT, ERROR_ADDRESS_TEXT\n} from \"../utils/validator\";\nimport { CONTRACT_ADDRESS_MAIN, CONTRACT_ADDRESS_SELL } from '../constants/contract';\nimport CONTRACT_MAIN_ABI from '../constants/mintNFT.json';\nimport CONTRACT_SELL_ABI from '../constants/sellNFT_CryptoArteSales.json';\n\nimport './App.css';\n\nconst web3 = new Web3(Web3.givenProvider);\n\nexport const App = () => {\n    useEffect(() => {\n        window.ethereum.enable();\n        setCurrentAccount(web3.eth.accounts.currentProvider.selectedAddress.toLowerCase());\n    }, []);\n\n    const contractMain = new web3.eth.Contract(CONTRACT_MAIN_ABI, CONTRACT_ADDRESS_MAIN);\n    const [currentAccount, setCurrentAccount] = useState(undefined);\n    const [url, setUrl] = useState('');\n    const [tokenId, setTokenId] = useState(null);\n    const [errors, setErrors] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    const handleChangeTokenId = (e) => setTokenId(+e.target.value || null);\n    const handleChangeUrl = (e) => setUrl(e.target.value);\n\n    const handleSubmitMint = async (e) => {\n        e.preventDefault();\n        try {\n            setErrors([]);\n            setIsDone(false);\n            const isValidUrl = validateUrl(url);\n            const isValidTokenId = validateTokenId(tokenId);\n\n            if (!isValidUrl) {\n                setErrors((errors) => [...errors, ERROR_URL_TEXT]);\n            }\n            if (!isValidTokenId) {\n                setErrors((errors) => [...errors, ERROR_TOKEN_ID_TEXT]);\n            }\n            if (!currentAccount) {\n                setErrors((errors) => [...errors, ERROR_CONTRACT_TEXT]);\n            }\n\n            if (currentAccount && isValidTokenId && isValidUrl) {\n                await contractMain.methods.mint(currentAccount, tokenId, url).send({ from: currentAccount });\n                setIsDone(true);\n            }\n        } catch (e) {\n            setErrors([e.message]);\n        }\n    };\n\n    const contractSell = new web3.eth.Contract(CONTRACT_SELL_ABI, CONTRACT_ADDRESS_SELL);\n    const [tokenIdPrice, setTokenIdPrice] = useState(null);\n    const [price, setPrice] = useState(null);\n\n    const handleChangePrice = (e) => setPrice(+e.target.value || null);\n    const handleChangeTokenIdPrice = (e) => setTokenIdPrice(+e.target.value || null);\n\n    const handleSubmitSetPrice = async (e) => {\n        e.preventDefault();\n        try {\n            setErrors([]);\n            setIsDone(false);\n            const isValidTokenIdPrice = validateTokenId(tokenIdPrice);\n            const isValidPrice = validateTokenId(price);\n\n            if (!isValidTokenIdPrice) {\n                setErrors((errors) => [...errors, ERROR_TOKEN_ID_TEXT]);\n            }\n            if (!isValidPrice) {\n                setErrors((errors) => [...errors, ERROR_PRICE_TEXT]);\n            }\n\n            if (currentAccount && isValidTokenIdPrice && isValidPrice) {\n                await contractSell.methods.setCurrentPrice(tokenIdPrice, price).send({ from: currentAccount });\n                setIsDone(true);\n            }\n        } catch (e) {\n            setErrors([e.message]);\n        }\n    }\n\n    const [addressToApprove, setAddressToApprove] = useState('');\n    const handleChangeAddressToApprove = (e) => setAddressToApprove(e.target.value);\n    const handleSubmitApprove = async (e) => {\n        e.preventDefault();\n        try {\n            setErrors([]);\n            setIsDone(false);\n            const isValidAddressToApprove = validateAddress(addressToApprove);\n\n            if (!isValidAddressToApprove) {\n                setErrors((errors) => [...errors, ERROR_ADDRESS_TEXT]);\n            }\n\n            if (currentAccount && isValidAddressToApprove) {\n                await contractMain.methods.setApprovalForAll(addressToApprove, true).send({ from: currentAccount });\n                setIsDone(true);\n            }\n        } catch (e) {\n            setErrors([e.message]);\n        }\n    }\n\n    return (\n        <div className=\"App\">\n            <header className=\"App__header\">NFT Marketplace</header>\n            <div className=\"App__content\">\n                <form className=\"App__form\" onSubmit={handleSubmitMint}>\n                    <label className=\"App__form__label\">\n                        TokenId:\n                        <input className=\"App__form__input\" type=\"number\" value={tokenId} onChange={handleChangeTokenId} />\n                    </label>\n                    <label className=\"App__form__label\">\n                        Url:\n                        <input className=\"App__form__input\" type=\"text\" value={url} onChange={handleChangeUrl} />\n                    </label>\n                    <input type=\"submit\" className=\"App__form__button\" disabled={!tokenId || !url} value=\"Mint\" />\n                </form>\n\n                <form className=\"App__form\" onSubmit={handleSubmitSetPrice}>\n                    <label className=\"App__form__label\">\n                        TokenId:\n                        <input className=\"App__form__input\" type=\"number\" value={tokenIdPrice} onChange={handleChangeTokenIdPrice} />\n                    </label>\n                    <label className=\"App__form__label\">\n                        Price:\n                        <input className=\"App__form__input\" type=\"number\" value={price} onChange={handleChangePrice} />\n                    </label>\n                    <input type=\"submit\" className=\"App__form__button\" disabled={!tokenIdPrice || !price} value=\"Set price\" />\n                </form>\n\n                <form className=\"App__form\" onSubmit={handleSubmitApprove}>\n                    <label className=\"App__form__label\">\n                        Address:\n                        <input className=\"App__form__input\" type=\"string\" value={addressToApprove} onChange={handleChangeAddressToApprove} />\n                    </label>\n                    <input type=\"submit\" className=\"App__form__button\" disabled={!addressToApprove} value=\"Approve\" />\n                </form>\n            </div>\n            {\n                !!errors.length && (\n                    <div className=\"App__errors\">\n                        {errors.map((error) => (\n                            <div key={error} className=\"App__errors__error\">{error}</div>\n                        ))}\n                    </div>\n                )\n            }\n            { isDone && <div className=\"App__done\">DONE</div> }\n        </div>\n    );\n}\n","// From https://ropsten.etherscan.io/address/0x5c007a1d8051dfda60b3692008b9e10731b67fde\n\nexport const CONTRACT_ADDRESS_MAIN = '0x5C007A1d8051DFDa60B3692008b9e10731b67FDE';\nexport const CONTRACT_ADDRESS_SELL = '0x5C007A1d8051DFDa60B3692008b9e10731b67FDE'; // TODO: найти нужный адрес\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}